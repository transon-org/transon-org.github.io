{
    "doc": "`Transformer` class interpolates template with input data.\nFormat of output is defined by template.\nInput is used to fill values into template placeholders.\n\n```python\ntransformer = Transformer(template)\noutput_data = transformer.transform(input_data)\n```\n\nTemplate could be any JSON structure. It will be reflected as-is in output, except of `rules` structures.\nRules are json objects with special attribute named `$` (this is called marker and can be changed).\nIf the rule has nested template the same applies to it as well. For example\n\n```json\n{\n    \"test\": {\n        \"$\": \"map\",\n        \"item\": [\n            {\n                \"x\": {\n                    \"$\": item\n                }\n            }\n        ]\n    }\n}\n```\n\nAt the top level output will just copy template `{\"test\": ...}`.\nThen the `map` rule will be applied to the input executing sub-template, defined by `item` attribute,\nfor each item in input collection.\nLet's assume that our input is `[1, 2, 3]`.\nInner template contains another rule `{\"$\": \"item\"}` which points to value of items of the input.\nSo the final result will be:\n\n```json\n    {\n    \"test\": [\n        [{\"x\": 1}],\n        [{\"x\": 2}],\n        [{\"x\": 3}],\n    ]\n}\n```\n\nNote that each item preserves its template definition (including list around object).\n\nAll rules are pluggable. There is a list of rules available out of the box.\nHowever, you can easily add your own rules with their own attributes.\n\n```python\n@Transformer.register_rule('my_rule')\ndef my_rule(t: Transformer, template, context: Context):\n    ...\n```\n\nYou can also inherit `Transformer` class and add rules to subclass to avoid functionality collision.\n\n```python\nclass Transformer1(Transformer):\n    pass\n\nclass Transformer2(Transformer):\n    pass\n\n@Transformer1.register_rule('my_rule')\ndef my_rule1(t: Transformer, template, context: Context):\n    ...\n\n@Transformer2.register_rule('my_rule')\ndef my_rule2(t: Transformer, template, context: Context):\n    ...\n```\n\nNote that `my_rule` can be used with both transformers but may behave differently.\n\nIn same fashion you can also add addition operators for expressions (`expr`) calculations\nand function (`call`) using decorators\n`register_operator` and `register_function`.",
    "rules": [
        {
            "rule": {
                "name": "this",
                "doc": "Returns the value stored in current transformation context.\nThe root context has the value equals to input of transformation.\nEach operation creates new context with value of its result."
            },
            "examples": [
                {
                    "name": "ExprSimpleValues1",
                    "doc": "Adds suffix to input string.\nIllustrates functionality of `expr` rule with direct parameters.",
                    "template": {
                        "$": "expr",
                        "op": "+",
                        "values": [
                            {
                                "$": "this"
                            },
                            "_suffix"
                        ]
                    },
                    "data": "value",
                    "result": "value_suffix"
                },
                {
                    "name": "ExprSimpleValues2",
                    "doc": "Adds prefix to input string.\nIllustrates functionality of `expr` rule with direct parameters.",
                    "template": {
                        "$": "expr",
                        "op": "+",
                        "values": [
                            "prefix_",
                            {
                                "$": "this"
                            }
                        ]
                    },
                    "data": "value",
                    "result": "prefix_value"
                },
                {
                    "name": "JoinWithStaticNoOverrides",
                    "doc": "Enriches input dict with default value.",
                    "template": {
                        "$": "join",
                        "items": [
                            {
                                "a": "default"
                            },
                            {
                                "$": "this"
                            }
                        ]
                    },
                    "data": {
                        "a": "b",
                        "c": "d"
                    },
                    "result": {
                        "a": "b",
                        "c": "d"
                    }
                },
                {
                    "name": "JoinWithStaticWithOverrides",
                    "doc": "Enriches input dict with default value.",
                    "template": {
                        "$": "join",
                        "items": [
                            {
                                "a": "default"
                            },
                            {
                                "$": "this"
                            }
                        ]
                    },
                    "data": {
                        "c": "d",
                        "e": "f"
                    },
                    "result": {
                        "a": "default",
                        "c": "d",
                        "e": "f"
                    }
                }
            ],
            "params": []
        },
        {
            "rule": {
                "name": "parent",
                "doc": "Returns the value stored in previous context."
            },
            "examples": [
                {
                    "name": "ExprSimpleMonads2",
                    "doc": "Adds prefix to input string.\nIllustrates functionality of `expr` rule in form of monad and usage of `parent` rule.",
                    "template": {
                        "$": "chain",
                        "funcs": [
                            "prefix_",
                            {
                                "$": "expr",
                                "op": "+",
                                "value": {
                                    "$": "parent"
                                }
                            }
                        ]
                    },
                    "data": "value",
                    "result": "prefix_value"
                },
                {
                    "name": "ExprMonadsComplex",
                    "doc": "For input dictionary containing two integers returns sum of squares.\nIllustrates functionality of `expr` rule in form of monad.",
                    "template": {
                        "$": "chain",
                        "funcs": [
                            {
                                "$": "chain",
                                "funcs": [
                                    {
                                        "$": "attr",
                                        "name": "a"
                                    },
                                    {
                                        "$": "expr",
                                        "op": "*",
                                        "value": {
                                            "$": "this"
                                        }
                                    }
                                ]
                            },
                            {
                                "$": "expr",
                                "op": "+",
                                "value": {
                                    "$": "chain",
                                    "funcs": [
                                        {
                                            "$": "parent"
                                        },
                                        {
                                            "$": "attr",
                                            "name": "b"
                                        },
                                        {
                                            "$": "expr",
                                            "op": "*",
                                            "value": {
                                                "$": "this"
                                            }
                                        }
                                    ]
                                }
                            }
                        ]
                    },
                    "data": {
                        "a": 3,
                        "b": 4
                    },
                    "result": 25
                }
            ],
            "params": []
        },
        {
            "rule": {
                "name": "item",
                "doc": "Works inside `map` rule when iterating over lists.\nReturns current item."
            },
            "examples": [
                {
                    "name": "MapListToList",
                    "doc": "Maps two lists obtained from different attributes of input.\nThen joins two obtained lists into single resulting list.",
                    "template": {
                        "$": "join",
                        "items": [
                            {
                                "$": "chain",
                                "funcs": [
                                    {
                                        "$": "attr",
                                        "name": "first"
                                    },
                                    {
                                        "$": "map",
                                        "item": {
                                            "first": {
                                                "$": "item"
                                            }
                                        }
                                    }
                                ]
                            },
                            {
                                "$": "chain",
                                "funcs": [
                                    {
                                        "$": "attr",
                                        "name": "second"
                                    },
                                    {
                                        "$": "map",
                                        "item": {
                                            "second": {
                                                "$": "item"
                                            }
                                        }
                                    }
                                ]
                            }
                        ]
                    },
                    "data": {
                        "first": [
                            1,
                            2,
                            3
                        ],
                        "second": [
                            4,
                            5,
                            6
                        ]
                    },
                    "result": [
                        {
                            "first": 1
                        },
                        {
                            "first": 2
                        },
                        {
                            "first": 3
                        },
                        {
                            "second": 4
                        },
                        {
                            "second": 5
                        },
                        {
                            "second": 6
                        }
                    ]
                },
                {
                    "name": "NoContentForMappingList",
                    "doc": "Demonstrates skipping of items in `list` generation by `map` rule when they have no value.",
                    "template": {
                        "$": "chain",
                        "funcs": [
                            [
                                {
                                    "$": "attr",
                                    "name": "x"
                                },
                                {
                                    "$": "get",
                                    "name": "nope"
                                },
                                {
                                    "$": "attr",
                                    "name": "y"
                                }
                            ],
                            {
                                "$": "map",
                                "items": [
                                    {
                                        "$": "index"
                                    },
                                    {
                                        "$": "item"
                                    }
                                ]
                            }
                        ]
                    },
                    "data": {
                        "x": "xxx",
                        "y": "yyy"
                    },
                    "result": [
                        0,
                        "xxx",
                        1,
                        2,
                        "yyy"
                    ]
                }
            ],
            "params": []
        },
        {
            "rule": {
                "name": "key",
                "doc": "Works inside `map` rule when iterating over dicts.\nReturns the key of current element."
            },
            "examples": [
                {
                    "name": "MapDictToList",
                    "doc": "Iterates over input dict and produces list of dicts with corresponding fields for keys and values.",
                    "template": {
                        "$": "map",
                        "item": {
                            "key": {
                                "$": "key"
                            },
                            "value": {
                                "$": "value"
                            }
                        }
                    },
                    "data": {
                        "a": 1,
                        "b": 2,
                        "c": 3
                    },
                    "result": [
                        {
                            "key": "a",
                            "value": 1
                        },
                        {
                            "key": "b",
                            "value": 2
                        },
                        {
                            "key": "c",
                            "value": 3
                        }
                    ]
                },
                {
                    "name": "MapDictToDictItems",
                    "doc": "Iterates over input dictionary and produces dictionary with keys and values swapped.",
                    "template": {
                        "$": "map",
                        "key": {
                            "$": "value"
                        },
                        "value": {
                            "$": "key"
                        }
                    },
                    "data": {
                        "a": "d",
                        "b": "e",
                        "c": "f"
                    },
                    "result": {
                        "d": "a",
                        "e": "b",
                        "f": "c"
                    }
                },
                {
                    "name": "MapDictToListItems",
                    "doc": "Iterates over input dictionary and produces interlaced list of both keys and values.",
                    "template": {
                        "$": "map",
                        "items": [
                            {
                                "$": "key"
                            },
                            {
                                "$": "value"
                            }
                        ]
                    },
                    "data": {
                        "a": 1,
                        "b": 2,
                        "c": 3
                    },
                    "result": [
                        "a",
                        1,
                        "b",
                        2,
                        "c",
                        3
                    ]
                }
            ],
            "params": []
        },
        {
            "rule": {
                "name": "index",
                "doc": "Works inside `map` rule.\nReturns 0-based index of iteration."
            },
            "examples": [
                {
                    "name": "FormatWithValue",
                    "doc": "Iterates over list of values.\nFor formatting value creates dict with dynamically calculated values.\nProduces list of strings using formatting.",
                    "template": {
                        "$": "map",
                        "item": {
                            "$": "format",
                            "pattern": "{x}-{y}",
                            "value": {
                                "x": {
                                    "$": "this"
                                },
                                "y": {
                                    "$": "expr",
                                    "op": "+",
                                    "values": [
                                        {
                                            "$": "index"
                                        },
                                        1
                                    ]
                                }
                            }
                        }
                    },
                    "data": [
                        "a",
                        "b",
                        "c"
                    ],
                    "result": [
                        "a-1",
                        "b-2",
                        "c-3"
                    ]
                },
                {
                    "name": "NoContentForMappingList",
                    "doc": "Demonstrates skipping of items in `list` generation by `map` rule when they have no value.",
                    "template": {
                        "$": "chain",
                        "funcs": [
                            [
                                {
                                    "$": "attr",
                                    "name": "x"
                                },
                                {
                                    "$": "get",
                                    "name": "nope"
                                },
                                {
                                    "$": "attr",
                                    "name": "y"
                                }
                            ],
                            {
                                "$": "map",
                                "items": [
                                    {
                                        "$": "index"
                                    },
                                    {
                                        "$": "item"
                                    }
                                ]
                            }
                        ]
                    },
                    "data": {
                        "x": "xxx",
                        "y": "yyy"
                    },
                    "result": [
                        0,
                        "xxx",
                        1,
                        2,
                        "yyy"
                    ]
                }
            ],
            "params": []
        },
        {
            "rule": {
                "name": "value",
                "doc": "Works inside `map` rule when iterating over dicts.\nReturns the value of current element."
            },
            "examples": [
                {
                    "name": "MapDictToList",
                    "doc": "Iterates over input dict and produces list of dicts with corresponding fields for keys and values.",
                    "template": {
                        "$": "map",
                        "item": {
                            "key": {
                                "$": "key"
                            },
                            "value": {
                                "$": "value"
                            }
                        }
                    },
                    "data": {
                        "a": 1,
                        "b": 2,
                        "c": 3
                    },
                    "result": [
                        {
                            "key": "a",
                            "value": 1
                        },
                        {
                            "key": "b",
                            "value": 2
                        },
                        {
                            "key": "c",
                            "value": 3
                        }
                    ]
                },
                {
                    "name": "MapDictToDictItems",
                    "doc": "Iterates over input dictionary and produces dictionary with keys and values swapped.",
                    "template": {
                        "$": "map",
                        "key": {
                            "$": "value"
                        },
                        "value": {
                            "$": "key"
                        }
                    },
                    "data": {
                        "a": "d",
                        "b": "e",
                        "c": "f"
                    },
                    "result": {
                        "d": "a",
                        "e": "b",
                        "f": "c"
                    }
                },
                {
                    "name": "MapDictToListItems",
                    "doc": "Iterates over input dictionary and produces interlaced list of both keys and values.",
                    "template": {
                        "$": "map",
                        "items": [
                            {
                                "$": "key"
                            },
                            {
                                "$": "value"
                            }
                        ]
                    },
                    "data": {
                        "a": 1,
                        "b": 2,
                        "c": 3
                    },
                    "result": [
                        "a",
                        1,
                        "b",
                        2,
                        "c",
                        3
                    ]
                }
            ],
            "params": []
        },
        {
            "rule": {
                "name": "set",
                "doc": "Stores the value in the context under given name.\nYou can consider this rule as variable assignment.\nVariable will be accessible under that name in all underlying contexts."
            },
            "examples": [
                {
                    "name": "AttrDynamicReferenceMultipleNames",
                    "doc": "Gets a list of values discovered in nested input structure of dicts with paths defined in input data.\nList of paths may include any number of paths of any depth.",
                    "template": {
                        "$": "chain",
                        "funcs": [
                            {
                                "$": "set",
                                "name": "root"
                            },
                            {
                                "$": "attr",
                                "name": "paths"
                            },
                            {
                                "$": "map",
                                "item": {
                                    "$": "chain",
                                    "funcs": [
                                        {
                                            "$": "get",
                                            "name": "root"
                                        },
                                        {
                                            "$": "attr",
                                            "names": {
                                                "$": "item"
                                            }
                                        }
                                    ]
                                }
                            }
                        ]
                    },
                    "data": {
                        "a": {
                            "b": {
                                "c": 1,
                                "d": 2
                            },
                            "e": {
                                "f": 3,
                                "g": 4
                            }
                        },
                        "paths": [
                            [
                                "a",
                                "b",
                                "d"
                            ],
                            [
                                "a",
                                "b",
                                "c"
                            ],
                            [
                                "a",
                                "e",
                                "g"
                            ],
                            [
                                "a",
                                "e",
                                "f"
                            ]
                        ]
                    },
                    "result": [
                        2,
                        1,
                        4,
                        3
                    ]
                }
            ],
            "params": [
                {
                    "param": {
                        "name": "name",
                        "doc": "Name of the variable. Can be dynamic."
                    },
                    "examples": []
                }
            ]
        },
        {
            "rule": {
                "name": "get",
                "doc": "Returns the value stored under given name.\nValue may be stored in current context or in any previous contexts."
            },
            "examples": [
                {
                    "name": "AttrDynamicReferenceMultipleNames",
                    "doc": "Gets a list of values discovered in nested input structure of dicts with paths defined in input data.\nList of paths may include any number of paths of any depth.",
                    "template": {
                        "$": "chain",
                        "funcs": [
                            {
                                "$": "set",
                                "name": "root"
                            },
                            {
                                "$": "attr",
                                "name": "paths"
                            },
                            {
                                "$": "map",
                                "item": {
                                    "$": "chain",
                                    "funcs": [
                                        {
                                            "$": "get",
                                            "name": "root"
                                        },
                                        {
                                            "$": "attr",
                                            "names": {
                                                "$": "item"
                                            }
                                        }
                                    ]
                                }
                            }
                        ]
                    },
                    "data": {
                        "a": {
                            "b": {
                                "c": 1,
                                "d": 2
                            },
                            "e": {
                                "f": 3,
                                "g": 4
                            }
                        },
                        "paths": [
                            [
                                "a",
                                "b",
                                "d"
                            ],
                            [
                                "a",
                                "b",
                                "c"
                            ],
                            [
                                "a",
                                "e",
                                "g"
                            ],
                            [
                                "a",
                                "e",
                                "f"
                            ]
                        ]
                    },
                    "result": [
                        2,
                        1,
                        4,
                        3
                    ]
                },
                {
                    "name": "NoContentForAttr",
                    "doc": "Gets variable names `foo` that does not exist from context.\nThen tries to get attribute named `bar` of non-existing value.\nThis results into no value which translates into `None`.",
                    "template": {
                        "$": "chain",
                        "funcs": [
                            {
                                "$": "get",
                                "name": "foo"
                            },
                            {
                                "$": "attr",
                                "name": "bar"
                            }
                        ]
                    },
                    "data": "value",
                    "result": null
                },
                {
                    "name": "NoContentForObjectKey",
                    "doc": "Creates a dict with item key that has no value.\nIt results with empty object.",
                    "template": {
                        "$": "object",
                        "key": {
                            "$": "get",
                            "name": "foo"
                        },
                        "value": "bar"
                    },
                    "data": "value",
                    "result": {}
                },
                {
                    "name": "NoContentForObjectValue",
                    "doc": "Creates a dict with item value that has no value.\nIt results with empty object.",
                    "template": {
                        "$": "object",
                        "key": "foo",
                        "value": {
                            "$": "get",
                            "name": "bar"
                        }
                    },
                    "data": "value",
                    "result": {}
                },
                {
                    "name": "NoContentForMappingList",
                    "doc": "Demonstrates skipping of items in `list` generation by `map` rule when they have no value.",
                    "template": {
                        "$": "chain",
                        "funcs": [
                            [
                                {
                                    "$": "attr",
                                    "name": "x"
                                },
                                {
                                    "$": "get",
                                    "name": "nope"
                                },
                                {
                                    "$": "attr",
                                    "name": "y"
                                }
                            ],
                            {
                                "$": "map",
                                "items": [
                                    {
                                        "$": "index"
                                    },
                                    {
                                        "$": "item"
                                    }
                                ]
                            }
                        ]
                    },
                    "data": {
                        "x": "xxx",
                        "y": "yyy"
                    },
                    "result": [
                        0,
                        "xxx",
                        1,
                        2,
                        "yyy"
                    ]
                },
                {
                    "name": "NoContentForMappingDict",
                    "doc": "Demonstrates skipping of items in `dict` generation by `map` rule when they have no value.",
                    "template": {
                        "$": "chain",
                        "funcs": [
                            [
                                {
                                    "key": {
                                        "$": "attr",
                                        "name": "x"
                                    },
                                    "value": {
                                        "$": "get",
                                        "name": "nope"
                                    }
                                },
                                {
                                    "key": {
                                        "$": "get",
                                        "name": "nope"
                                    },
                                    "value": {
                                        "$": "attr",
                                        "name": "y"
                                    }
                                },
                                {
                                    "key": {
                                        "$": "attr",
                                        "name": "x"
                                    },
                                    "value": {
                                        "$": "attr",
                                        "name": "y"
                                    }
                                }
                            ],
                            {
                                "$": "map",
                                "key": {
                                    "$": "attr",
                                    "name": "key"
                                },
                                "value": {
                                    "$": "attr",
                                    "name": "value"
                                }
                            }
                        ]
                    },
                    "data": {
                        "x": "xxx",
                        "y": "yyy"
                    },
                    "result": {
                        "xxx": "yyy"
                    }
                }
            ],
            "params": [
                {
                    "param": {
                        "name": "name",
                        "doc": "Name of the variable. Can be dynamic."
                    },
                    "examples": []
                }
            ]
        },
        {
            "rule": {
                "name": "attr",
                "doc": "Returns values of attribute or item from current value in context.\nCan search in deeply nested structures with path.\nIf attribute is not present an exception will be thrown.\n\nParameters are mutually exclusive."
            },
            "examples": [],
            "params": [
                {
                    "param": {
                        "name": "name",
                        "doc": "Name of attribute to search. \nIt is possible to use a number as the name for items in arrays. \nCan be dynamic."
                    },
                    "examples": [
                        {
                            "name": "AttrSimpleFixedName",
                            "doc": "Gets value from input `dict` by the name of attribute defined in template as constant value.",
                            "template": {
                                "$": "attr",
                                "name": "a"
                            },
                            "data": {
                                "a": 1
                            },
                            "result": 1
                        },
                        {
                            "name": "AttrDynamicReferenceName1",
                            "doc": "Gets value from input `dict` by the name of attribute defined in different attribute of input data.",
                            "template": {
                                "$": "attr",
                                "name": {
                                    "$": "attr",
                                    "name": "name"
                                }
                            },
                            "data": {
                                "a": 1,
                                "b": 2,
                                "name": "a"
                            },
                            "result": 1
                        },
                        {
                            "name": "AttrDynamicReferenceName2",
                            "doc": "Gets value from input `dict` by the name of attribute defined in different attribute of input data.",
                            "template": {
                                "$": "attr",
                                "name": {
                                    "$": "attr",
                                    "name": "name"
                                }
                            },
                            "data": {
                                "a": 1,
                                "b": 2,
                                "name": "b"
                            },
                            "result": 2
                        },
                        {
                            "name": "MapListsToDict",
                            "doc": "Zips two lists containing keys and values together into pairs.\nThen iterates over list of pairs and produces resulting dict.",
                            "template": {
                                "$": "chain",
                                "funcs": [
                                    {
                                        "$": "zip",
                                        "items": [
                                            {
                                                "$": "attr",
                                                "name": "keys"
                                            },
                                            {
                                                "$": "attr",
                                                "name": "values"
                                            }
                                        ]
                                    },
                                    {
                                        "$": "map",
                                        "key": {
                                            "$": "attr",
                                            "name": 0
                                        },
                                        "value": {
                                            "$": "attr",
                                            "name": 1
                                        }
                                    }
                                ]
                            },
                            "data": {
                                "keys": [
                                    "a",
                                    "b",
                                    "c"
                                ],
                                "values": [
                                    1,
                                    2,
                                    3
                                ]
                            },
                            "result": {
                                "a": 1,
                                "b": 2,
                                "c": 3
                            }
                        },
                        {
                            "name": "NoContentForAttr",
                            "doc": "Gets variable names `foo` that does not exist from context.\nThen tries to get attribute named `bar` of non-existing value.\nThis results into no value which translates into `None`.",
                            "template": {
                                "$": "chain",
                                "funcs": [
                                    {
                                        "$": "get",
                                        "name": "foo"
                                    },
                                    {
                                        "$": "attr",
                                        "name": "bar"
                                    }
                                ]
                            },
                            "data": "value",
                            "result": null
                        }
                    ]
                },
                {
                    "param": {
                        "name": "names",
                        "doc": "List of attribute names or indexes to search in nested structure. \nCan be dynamic."
                    },
                    "examples": [
                        {
                            "name": "AttrSimpleFixedNames",
                            "doc": "Gets a list of values with 4 elements discovered in nested input structure of dicts with paths defined in template.",
                            "template": [
                                {
                                    "$": "attr",
                                    "names": [
                                        "a",
                                        "b",
                                        "c"
                                    ]
                                },
                                {
                                    "$": "attr",
                                    "names": [
                                        "a",
                                        "b",
                                        "d"
                                    ]
                                },
                                {
                                    "$": "attr",
                                    "names": [
                                        "a",
                                        "e",
                                        "f"
                                    ]
                                },
                                {
                                    "$": "attr",
                                    "names": [
                                        "a",
                                        "e",
                                        "g"
                                    ]
                                }
                            ],
                            "data": {
                                "a": {
                                    "b": {
                                        "c": 1,
                                        "d": 2
                                    },
                                    "e": {
                                        "f": 3,
                                        "g": 4
                                    }
                                }
                            },
                            "result": [
                                1,
                                2,
                                3,
                                4
                            ]
                        },
                        {
                            "name": "AttrDynamicReferenceNames",
                            "doc": "Gets value from nested input structure of dicts with paths defined in different attribute of input data.",
                            "template": {
                                "$": "attr",
                                "names": {
                                    "$": "attr",
                                    "name": "path"
                                }
                            },
                            "data": {
                                "a": {
                                    "b": {
                                        "c": 1,
                                        "d": 2
                                    },
                                    "e": {
                                        "f": 3,
                                        "g": 4
                                    }
                                },
                                "path": [
                                    "a",
                                    "e",
                                    "f"
                                ]
                            },
                            "result": 3
                        },
                        {
                            "name": "AttrDynamicReferenceMultipleNames",
                            "doc": "Gets a list of values discovered in nested input structure of dicts with paths defined in input data.\nList of paths may include any number of paths of any depth.",
                            "template": {
                                "$": "chain",
                                "funcs": [
                                    {
                                        "$": "set",
                                        "name": "root"
                                    },
                                    {
                                        "$": "attr",
                                        "name": "paths"
                                    },
                                    {
                                        "$": "map",
                                        "item": {
                                            "$": "chain",
                                            "funcs": [
                                                {
                                                    "$": "get",
                                                    "name": "root"
                                                },
                                                {
                                                    "$": "attr",
                                                    "names": {
                                                        "$": "item"
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                ]
                            },
                            "data": {
                                "a": {
                                    "b": {
                                        "c": 1,
                                        "d": 2
                                    },
                                    "e": {
                                        "f": 3,
                                        "g": 4
                                    }
                                },
                                "paths": [
                                    [
                                        "a",
                                        "b",
                                        "d"
                                    ],
                                    [
                                        "a",
                                        "b",
                                        "c"
                                    ],
                                    [
                                        "a",
                                        "e",
                                        "g"
                                    ],
                                    [
                                        "a",
                                        "e",
                                        "f"
                                    ]
                                ]
                            },
                            "result": [
                                2,
                                1,
                                4,
                                3
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "rule": {
                "name": "object",
                "doc": "Returns a dict with one item.\nThis is useful when you need dynamically named attributes.\nIf you need multiple attributes use `join` or `map`.\nIf `key` or `value` returns no result then the rule returns empty dict."
            },
            "examples": [
                {
                    "name": "JoinManyDynamicDicts",
                    "doc": "Iterates over input list twice.\nFirst time produces list of `dicts` with keys and values defined in separate attributes of input items.\nSecond time produces list of `dicts` but with keys and values swapped.\nJoins together results of two iteration into single list.\nThen joins together items of the list into single resulting object.",
                    "template": {
                        "$": "join",
                        "items": {
                            "$": "join",
                            "items": [
                                {
                                    "$": "map",
                                    "item": {
                                        "$": "object",
                                        "key": {
                                            "$": "attr",
                                            "name": "key"
                                        },
                                        "value": {
                                            "$": "attr",
                                            "name": "value"
                                        }
                                    }
                                },
                                {
                                    "$": "map",
                                    "item": {
                                        "$": "object",
                                        "key": {
                                            "$": "attr",
                                            "name": "value"
                                        },
                                        "value": {
                                            "$": "attr",
                                            "name": "key"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "data": [
                        {
                            "key": "a",
                            "value": "b"
                        },
                        {
                            "key": "c",
                            "value": "d"
                        }
                    ],
                    "result": {
                        "a": "b",
                        "b": "a",
                        "c": "d",
                        "d": "c"
                    }
                }
            ],
            "params": [
                {
                    "param": {
                        "name": "key",
                        "doc": "Defines template for name of attribute."
                    },
                    "examples": [
                        {
                            "name": "NoContentForObjectKey",
                            "doc": "Creates a dict with item key that has no value.\nIt results with empty object.",
                            "template": {
                                "$": "object",
                                "key": {
                                    "$": "get",
                                    "name": "foo"
                                },
                                "value": "bar"
                            },
                            "data": "value",
                            "result": {}
                        }
                    ]
                },
                {
                    "param": {
                        "name": "value",
                        "doc": "Defines template for value of attribute."
                    },
                    "examples": [
                        {
                            "name": "NoContentForObjectValue",
                            "doc": "Creates a dict with item value that has no value.\nIt results with empty object.",
                            "template": {
                                "$": "object",
                                "key": "foo",
                                "value": {
                                    "$": "get",
                                    "name": "bar"
                                }
                            },
                            "data": "value",
                            "result": {}
                        }
                    ]
                }
            ]
        },
        {
            "rule": {
                "name": "map",
                "doc": "Iterates over `list` or `dict` and produces new `dict` or `list` with items based on template."
            },
            "examples": [],
            "params": [
                {
                    "param": {
                        "name": "item",
                        "doc": "Defines template for items when producing the `list`"
                    },
                    "examples": [
                        {
                            "name": "AttrDynamicReferenceMultipleNames",
                            "doc": "Gets a list of values discovered in nested input structure of dicts with paths defined in input data.\nList of paths may include any number of paths of any depth.",
                            "template": {
                                "$": "chain",
                                "funcs": [
                                    {
                                        "$": "set",
                                        "name": "root"
                                    },
                                    {
                                        "$": "attr",
                                        "name": "paths"
                                    },
                                    {
                                        "$": "map",
                                        "item": {
                                            "$": "chain",
                                            "funcs": [
                                                {
                                                    "$": "get",
                                                    "name": "root"
                                                },
                                                {
                                                    "$": "attr",
                                                    "names": {
                                                        "$": "item"
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                ]
                            },
                            "data": {
                                "a": {
                                    "b": {
                                        "c": 1,
                                        "d": 2
                                    },
                                    "e": {
                                        "f": 3,
                                        "g": 4
                                    }
                                },
                                "paths": [
                                    [
                                        "a",
                                        "b",
                                        "d"
                                    ],
                                    [
                                        "a",
                                        "b",
                                        "c"
                                    ],
                                    [
                                        "a",
                                        "e",
                                        "g"
                                    ],
                                    [
                                        "a",
                                        "e",
                                        "f"
                                    ]
                                ]
                            },
                            "result": [
                                2,
                                1,
                                4,
                                3
                            ]
                        },
                        {
                            "name": "ChainWithAttr",
                            "doc": "Searching for values in nested structure with sequence of `attr` operations chained together.",
                            "template": {
                                "$": "map",
                                "item": {
                                    "key": {
                                        "$": "chain",
                                        "funcs": [
                                            {
                                                "$": "item"
                                            },
                                            {
                                                "$": "attr",
                                                "name": "a"
                                            },
                                            {
                                                "$": "attr",
                                                "name": "b"
                                            },
                                            {
                                                "$": "attr",
                                                "name": "c"
                                            }
                                        ]
                                    },
                                    "value": {
                                        "$": "chain",
                                        "funcs": [
                                            {
                                                "$": "item"
                                            },
                                            {
                                                "$": "attr",
                                                "name": "d"
                                            },
                                            {
                                                "$": "attr",
                                                "name": "e"
                                            },
                                            {
                                                "$": "attr",
                                                "name": "f"
                                            }
                                        ]
                                    }
                                }
                            },
                            "data": [
                                {
                                    "a": {
                                        "b": {
                                            "c": 1
                                        }
                                    },
                                    "d": {
                                        "e": {
                                            "f": 2
                                        }
                                    }
                                },
                                {
                                    "a": {
                                        "b": {
                                            "c": 3
                                        }
                                    },
                                    "d": {
                                        "e": {
                                            "f": 4
                                        }
                                    }
                                }
                            ],
                            "result": [
                                {
                                    "key": 1,
                                    "value": 2
                                },
                                {
                                    "key": 3,
                                    "value": 4
                                }
                            ]
                        },
                        {
                            "name": "FormatFromSingleValue",
                            "doc": "Iterates list with floats and produces list of strings by formatting each item.",
                            "template": {
                                "$": "map",
                                "item": {
                                    "$": "format",
                                    "pattern": "{:.03f}"
                                }
                            },
                            "data": [
                                0.5,
                                0.3333333333333333,
                                0.25,
                                0.2,
                                0.16666666666666666,
                                0.14285714285714285,
                                0.125,
                                0.1111111111111111
                            ],
                            "result": [
                                "0.500",
                                "0.333",
                                "0.250",
                                "0.200",
                                "0.167",
                                "0.143",
                                "0.125",
                                "0.111"
                            ]
                        },
                        {
                            "name": "FormatFromDict",
                            "doc": "Iterates over list of dicts and produces list of string using items for filling pattern slots.",
                            "template": {
                                "$": "map",
                                "item": {
                                    "$": "format",
                                    "pattern": "{name}-{index}"
                                }
                            },
                            "data": [
                                {
                                    "name": "a",
                                    "index": 1
                                },
                                {
                                    "name": "b",
                                    "index": 2
                                },
                                {
                                    "name": "c",
                                    "index": 3
                                }
                            ],
                            "result": [
                                "a-1",
                                "b-2",
                                "c-3"
                            ]
                        },
                        {
                            "name": "FormatFromList",
                            "doc": "Iterates over list of lists and produces list of string using items for filling pattern slots.",
                            "template": {
                                "$": "map",
                                "item": {
                                    "$": "format",
                                    "pattern": "{0}-{1}"
                                }
                            },
                            "data": [
                                [
                                    "a",
                                    1
                                ],
                                [
                                    "b",
                                    2
                                ],
                                [
                                    "c",
                                    3
                                ]
                            ],
                            "result": [
                                "a-1",
                                "b-2",
                                "c-3"
                            ]
                        },
                        {
                            "name": "FormatWithValue",
                            "doc": "Iterates over list of values.\nFor formatting value creates dict with dynamically calculated values.\nProduces list of strings using formatting.",
                            "template": {
                                "$": "map",
                                "item": {
                                    "$": "format",
                                    "pattern": "{x}-{y}",
                                    "value": {
                                        "x": {
                                            "$": "this"
                                        },
                                        "y": {
                                            "$": "expr",
                                            "op": "+",
                                            "values": [
                                                {
                                                    "$": "index"
                                                },
                                                1
                                            ]
                                        }
                                    }
                                }
                            },
                            "data": [
                                "a",
                                "b",
                                "c"
                            ],
                            "result": [
                                "a-1",
                                "b-2",
                                "c-3"
                            ]
                        },
                        {
                            "name": "JoinManyDynamicDicts",
                            "doc": "Iterates over input list twice.\nFirst time produces list of `dicts` with keys and values defined in separate attributes of input items.\nSecond time produces list of `dicts` but with keys and values swapped.\nJoins together results of two iteration into single list.\nThen joins together items of the list into single resulting object.",
                            "template": {
                                "$": "join",
                                "items": {
                                    "$": "join",
                                    "items": [
                                        {
                                            "$": "map",
                                            "item": {
                                                "$": "object",
                                                "key": {
                                                    "$": "attr",
                                                    "name": "key"
                                                },
                                                "value": {
                                                    "$": "attr",
                                                    "name": "value"
                                                }
                                            }
                                        },
                                        {
                                            "$": "map",
                                            "item": {
                                                "$": "object",
                                                "key": {
                                                    "$": "attr",
                                                    "name": "value"
                                                },
                                                "value": {
                                                    "$": "attr",
                                                    "name": "key"
                                                }
                                            }
                                        }
                                    ]
                                }
                            },
                            "data": [
                                {
                                    "key": "a",
                                    "value": "b"
                                },
                                {
                                    "key": "c",
                                    "value": "d"
                                }
                            ],
                            "result": {
                                "a": "b",
                                "b": "a",
                                "c": "d",
                                "d": "c"
                            }
                        },
                        {
                            "name": "MapListToList",
                            "doc": "Maps two lists obtained from different attributes of input.\nThen joins two obtained lists into single resulting list.",
                            "template": {
                                "$": "join",
                                "items": [
                                    {
                                        "$": "chain",
                                        "funcs": [
                                            {
                                                "$": "attr",
                                                "name": "first"
                                            },
                                            {
                                                "$": "map",
                                                "item": {
                                                    "first": {
                                                        "$": "item"
                                                    }
                                                }
                                            }
                                        ]
                                    },
                                    {
                                        "$": "chain",
                                        "funcs": [
                                            {
                                                "$": "attr",
                                                "name": "second"
                                            },
                                            {
                                                "$": "map",
                                                "item": {
                                                    "second": {
                                                        "$": "item"
                                                    }
                                                }
                                            }
                                        ]
                                    }
                                ]
                            },
                            "data": {
                                "first": [
                                    1,
                                    2,
                                    3
                                ],
                                "second": [
                                    4,
                                    5,
                                    6
                                ]
                            },
                            "result": [
                                {
                                    "first": 1
                                },
                                {
                                    "first": 2
                                },
                                {
                                    "first": 3
                                },
                                {
                                    "second": 4
                                },
                                {
                                    "second": 5
                                },
                                {
                                    "second": 6
                                }
                            ]
                        },
                        {
                            "name": "MapDictToList",
                            "doc": "Iterates over input dict and produces list of dicts with corresponding fields for keys and values.",
                            "template": {
                                "$": "map",
                                "item": {
                                    "key": {
                                        "$": "key"
                                    },
                                    "value": {
                                        "$": "value"
                                    }
                                }
                            },
                            "data": {
                                "a": 1,
                                "b": 2,
                                "c": 3
                            },
                            "result": [
                                {
                                    "key": "a",
                                    "value": 1
                                },
                                {
                                    "key": "b",
                                    "value": 2
                                },
                                {
                                    "key": "c",
                                    "value": 3
                                }
                            ]
                        }
                    ]
                },
                {
                    "param": {
                        "name": "items",
                        "doc": "Defines templates for series of items when producing the `list`"
                    },
                    "examples": [
                        {
                            "name": "MapDictToListItems",
                            "doc": "Iterates over input dictionary and produces interlaced list of both keys and values.",
                            "template": {
                                "$": "map",
                                "items": [
                                    {
                                        "$": "key"
                                    },
                                    {
                                        "$": "value"
                                    }
                                ]
                            },
                            "data": {
                                "a": 1,
                                "b": 2,
                                "c": 3
                            },
                            "result": [
                                "a",
                                1,
                                "b",
                                2,
                                "c",
                                3
                            ]
                        },
                        {
                            "name": "NoContentForMappingList",
                            "doc": "Demonstrates skipping of items in `list` generation by `map` rule when they have no value.",
                            "template": {
                                "$": "chain",
                                "funcs": [
                                    [
                                        {
                                            "$": "attr",
                                            "name": "x"
                                        },
                                        {
                                            "$": "get",
                                            "name": "nope"
                                        },
                                        {
                                            "$": "attr",
                                            "name": "y"
                                        }
                                    ],
                                    {
                                        "$": "map",
                                        "items": [
                                            {
                                                "$": "index"
                                            },
                                            {
                                                "$": "item"
                                            }
                                        ]
                                    }
                                ]
                            },
                            "data": {
                                "x": "xxx",
                                "y": "yyy"
                            },
                            "result": [
                                0,
                                "xxx",
                                1,
                                2,
                                "yyy"
                            ]
                        }
                    ]
                },
                {
                    "param": {
                        "name": "key",
                        "doc": "Defines template for key when producing the `dict`"
                    },
                    "examples": [
                        {
                            "name": "MapDictToDictItems",
                            "doc": "Iterates over input dictionary and produces dictionary with keys and values swapped.",
                            "template": {
                                "$": "map",
                                "key": {
                                    "$": "value"
                                },
                                "value": {
                                    "$": "key"
                                }
                            },
                            "data": {
                                "a": "d",
                                "b": "e",
                                "c": "f"
                            },
                            "result": {
                                "d": "a",
                                "e": "b",
                                "f": "c"
                            }
                        },
                        {
                            "name": "MapListsToDict",
                            "doc": "Zips two lists containing keys and values together into pairs.\nThen iterates over list of pairs and produces resulting dict.",
                            "template": {
                                "$": "chain",
                                "funcs": [
                                    {
                                        "$": "zip",
                                        "items": [
                                            {
                                                "$": "attr",
                                                "name": "keys"
                                            },
                                            {
                                                "$": "attr",
                                                "name": "values"
                                            }
                                        ]
                                    },
                                    {
                                        "$": "map",
                                        "key": {
                                            "$": "attr",
                                            "name": 0
                                        },
                                        "value": {
                                            "$": "attr",
                                            "name": 1
                                        }
                                    }
                                ]
                            },
                            "data": {
                                "keys": [
                                    "a",
                                    "b",
                                    "c"
                                ],
                                "values": [
                                    1,
                                    2,
                                    3
                                ]
                            },
                            "result": {
                                "a": 1,
                                "b": 2,
                                "c": 3
                            }
                        },
                        {
                            "name": "NoContentForMappingDict",
                            "doc": "Demonstrates skipping of items in `dict` generation by `map` rule when they have no value.",
                            "template": {
                                "$": "chain",
                                "funcs": [
                                    [
                                        {
                                            "key": {
                                                "$": "attr",
                                                "name": "x"
                                            },
                                            "value": {
                                                "$": "get",
                                                "name": "nope"
                                            }
                                        },
                                        {
                                            "key": {
                                                "$": "get",
                                                "name": "nope"
                                            },
                                            "value": {
                                                "$": "attr",
                                                "name": "y"
                                            }
                                        },
                                        {
                                            "key": {
                                                "$": "attr",
                                                "name": "x"
                                            },
                                            "value": {
                                                "$": "attr",
                                                "name": "y"
                                            }
                                        }
                                    ],
                                    {
                                        "$": "map",
                                        "key": {
                                            "$": "attr",
                                            "name": "key"
                                        },
                                        "value": {
                                            "$": "attr",
                                            "name": "value"
                                        }
                                    }
                                ]
                            },
                            "data": {
                                "x": "xxx",
                                "y": "yyy"
                            },
                            "result": {
                                "xxx": "yyy"
                            }
                        }
                    ]
                },
                {
                    "param": {
                        "name": "value",
                        "doc": "Defines template for value when producing the `dict`"
                    },
                    "examples": [
                        {
                            "name": "MapDictToDictItems",
                            "doc": "Iterates over input dictionary and produces dictionary with keys and values swapped.",
                            "template": {
                                "$": "map",
                                "key": {
                                    "$": "value"
                                },
                                "value": {
                                    "$": "key"
                                }
                            },
                            "data": {
                                "a": "d",
                                "b": "e",
                                "c": "f"
                            },
                            "result": {
                                "d": "a",
                                "e": "b",
                                "f": "c"
                            }
                        },
                        {
                            "name": "MapListsToDict",
                            "doc": "Zips two lists containing keys and values together into pairs.\nThen iterates over list of pairs and produces resulting dict.",
                            "template": {
                                "$": "chain",
                                "funcs": [
                                    {
                                        "$": "zip",
                                        "items": [
                                            {
                                                "$": "attr",
                                                "name": "keys"
                                            },
                                            {
                                                "$": "attr",
                                                "name": "values"
                                            }
                                        ]
                                    },
                                    {
                                        "$": "map",
                                        "key": {
                                            "$": "attr",
                                            "name": 0
                                        },
                                        "value": {
                                            "$": "attr",
                                            "name": 1
                                        }
                                    }
                                ]
                            },
                            "data": {
                                "keys": [
                                    "a",
                                    "b",
                                    "c"
                                ],
                                "values": [
                                    1,
                                    2,
                                    3
                                ]
                            },
                            "result": {
                                "a": 1,
                                "b": 2,
                                "c": 3
                            }
                        },
                        {
                            "name": "NoContentForMappingDict",
                            "doc": "Demonstrates skipping of items in `dict` generation by `map` rule when they have no value.",
                            "template": {
                                "$": "chain",
                                "funcs": [
                                    [
                                        {
                                            "key": {
                                                "$": "attr",
                                                "name": "x"
                                            },
                                            "value": {
                                                "$": "get",
                                                "name": "nope"
                                            }
                                        },
                                        {
                                            "key": {
                                                "$": "get",
                                                "name": "nope"
                                            },
                                            "value": {
                                                "$": "attr",
                                                "name": "y"
                                            }
                                        },
                                        {
                                            "key": {
                                                "$": "attr",
                                                "name": "x"
                                            },
                                            "value": {
                                                "$": "attr",
                                                "name": "y"
                                            }
                                        }
                                    ],
                                    {
                                        "$": "map",
                                        "key": {
                                            "$": "attr",
                                            "name": "key"
                                        },
                                        "value": {
                                            "$": "attr",
                                            "name": "value"
                                        }
                                    }
                                ]
                            },
                            "data": {
                                "x": "xxx",
                                "y": "yyy"
                            },
                            "result": {
                                "xxx": "yyy"
                            }
                        }
                    ]
                }
            ]
        },
        {
            "rule": {
                "name": "zip",
                "doc": "Works exactly like `zip` function in python.\nConverts collection of lists into list of items.\nAnother way to think of `zip` is that it turns rows into columns, and columns into rows.\nThis is similar to transposing a matrix."
            },
            "examples": [
                {
                    "name": "MapListsToDict",
                    "doc": "Zips two lists containing keys and values together into pairs.\nThen iterates over list of pairs and produces resulting dict.",
                    "template": {
                        "$": "chain",
                        "funcs": [
                            {
                                "$": "zip",
                                "items": [
                                    {
                                        "$": "attr",
                                        "name": "keys"
                                    },
                                    {
                                        "$": "attr",
                                        "name": "values"
                                    }
                                ]
                            },
                            {
                                "$": "map",
                                "key": {
                                    "$": "attr",
                                    "name": 0
                                },
                                "value": {
                                    "$": "attr",
                                    "name": 1
                                }
                            }
                        ]
                    },
                    "data": {
                        "keys": [
                            "a",
                            "b",
                            "c"
                        ],
                        "values": [
                            1,
                            2,
                            3
                        ]
                    },
                    "result": {
                        "a": 1,
                        "b": 2,
                        "c": 3
                    }
                }
            ],
            "params": [
                {
                    "param": {
                        "name": "items",
                        "doc": "Defines the list of lists"
                    },
                    "examples": []
                }
            ]
        },
        {
            "rule": {
                "name": "file",
                "doc": "Writes a file using `write_file` delegate (a parameter to `Transformer` constructor).\nThis rule produces no result.\nFile will not be written if `name` or `content` returns no result."
            },
            "examples": [],
            "params": [
                {
                    "param": {
                        "name": "name",
                        "doc": "Defines template for file name"
                    },
                    "examples": []
                },
                {
                    "param": {
                        "name": "content",
                        "doc": "Defines template for file content. File content always has JSON formatted data"
                    },
                    "examples": []
                }
            ]
        },
        {
            "rule": {
                "name": "join",
                "doc": "Joins (concatenates) together several dicts, lists of strings.\nIf items to be concatenated have different types an exception will be thrown."
            },
            "examples": [
                {
                    "name": "JoinWithStaticNoOverrides",
                    "doc": "Enriches input dict with default value.",
                    "template": {
                        "$": "join",
                        "items": [
                            {
                                "a": "default"
                            },
                            {
                                "$": "this"
                            }
                        ]
                    },
                    "data": {
                        "a": "b",
                        "c": "d"
                    },
                    "result": {
                        "a": "b",
                        "c": "d"
                    }
                },
                {
                    "name": "JoinWithStaticWithOverrides",
                    "doc": "Enriches input dict with default value.",
                    "template": {
                        "$": "join",
                        "items": [
                            {
                                "a": "default"
                            },
                            {
                                "$": "this"
                            }
                        ]
                    },
                    "data": {
                        "c": "d",
                        "e": "f"
                    },
                    "result": {
                        "a": "default",
                        "c": "d",
                        "e": "f"
                    }
                },
                {
                    "name": "JoinTwoDictsNoCommonKeys",
                    "doc": "Joins two dicts taken from separate attributes of input into one dict.",
                    "template": {
                        "$": "join",
                        "items": [
                            {
                                "$": "attr",
                                "name": "first"
                            },
                            {
                                "$": "attr",
                                "name": "second"
                            }
                        ]
                    },
                    "data": {
                        "first": {
                            "a": 1,
                            "b": 2
                        },
                        "second": {
                            "c": 3,
                            "d": 4
                        }
                    },
                    "result": {
                        "a": 1,
                        "b": 2,
                        "c": 3,
                        "d": 4
                    }
                },
                {
                    "name": "JoinTwoDictsWithCommonKeys",
                    "doc": "Joins two dicts taken from separate attributes of input into one dict.",
                    "template": {
                        "$": "join",
                        "items": [
                            {
                                "$": "attr",
                                "name": "first"
                            },
                            {
                                "$": "attr",
                                "name": "second"
                            }
                        ]
                    },
                    "data": {
                        "first": {
                            "a": 1,
                            "b": 2,
                            "c": 5
                        },
                        "second": {
                            "c": 3,
                            "d": 4
                        }
                    },
                    "result": {
                        "a": 1,
                        "b": 2,
                        "c": 3,
                        "d": 4
                    }
                },
                {
                    "name": "JoinTwoStrings",
                    "doc": "Joins two dicts taken from separate attributes of input into one dict.",
                    "template": {
                        "$": "join",
                        "items": [
                            {
                                "$": "attr",
                                "name": "first"
                            },
                            {
                                "$": "attr",
                                "name": "second"
                            }
                        ]
                    },
                    "data": {
                        "first": "hello ",
                        "second": "world!"
                    },
                    "result": "hello world!"
                },
                {
                    "name": "JoinManyDynamicDicts",
                    "doc": "Iterates over input list twice.\nFirst time produces list of `dicts` with keys and values defined in separate attributes of input items.\nSecond time produces list of `dicts` but with keys and values swapped.\nJoins together results of two iteration into single list.\nThen joins together items of the list into single resulting object.",
                    "template": {
                        "$": "join",
                        "items": {
                            "$": "join",
                            "items": [
                                {
                                    "$": "map",
                                    "item": {
                                        "$": "object",
                                        "key": {
                                            "$": "attr",
                                            "name": "key"
                                        },
                                        "value": {
                                            "$": "attr",
                                            "name": "value"
                                        }
                                    }
                                },
                                {
                                    "$": "map",
                                    "item": {
                                        "$": "object",
                                        "key": {
                                            "$": "attr",
                                            "name": "value"
                                        },
                                        "value": {
                                            "$": "attr",
                                            "name": "key"
                                        }
                                    }
                                }
                            ]
                        }
                    },
                    "data": [
                        {
                            "key": "a",
                            "value": "b"
                        },
                        {
                            "key": "c",
                            "value": "d"
                        }
                    ],
                    "result": {
                        "a": "b",
                        "b": "a",
                        "c": "d",
                        "d": "c"
                    }
                },
                {
                    "name": "MapListToList",
                    "doc": "Maps two lists obtained from different attributes of input.\nThen joins two obtained lists into single resulting list.",
                    "template": {
                        "$": "join",
                        "items": [
                            {
                                "$": "chain",
                                "funcs": [
                                    {
                                        "$": "attr",
                                        "name": "first"
                                    },
                                    {
                                        "$": "map",
                                        "item": {
                                            "first": {
                                                "$": "item"
                                            }
                                        }
                                    }
                                ]
                            },
                            {
                                "$": "chain",
                                "funcs": [
                                    {
                                        "$": "attr",
                                        "name": "second"
                                    },
                                    {
                                        "$": "map",
                                        "item": {
                                            "second": {
                                                "$": "item"
                                            }
                                        }
                                    }
                                ]
                            }
                        ]
                    },
                    "data": {
                        "first": [
                            1,
                            2,
                            3
                        ],
                        "second": [
                            4,
                            5,
                            6
                        ]
                    },
                    "result": [
                        {
                            "first": 1
                        },
                        {
                            "first": 2
                        },
                        {
                            "first": 3
                        },
                        {
                            "second": 4
                        },
                        {
                            "second": 5
                        },
                        {
                            "second": 6
                        }
                    ]
                }
            ],
            "params": [
                {
                    "param": {
                        "name": "items",
                        "doc": "List of values to concatenate."
                    },
                    "examples": []
                },
                {
                    "param": {
                        "name": "sep",
                        "doc": "Defines separator for strings concatenation."
                    },
                    "examples": []
                }
            ]
        },
        {
            "rule": {
                "name": "chain",
                "doc": "Function composition operation.\nBuild function composition and executes it against value in current context.\n`chain(f1, f2, f3)(x) === f3(f2(f1(x)))`\n\nEach function execution creates new context that will be passed to next function.\n```plantuml\n@startuml\nleft to right direction\nrectangle this\nrectangle \"intermediate context\" as i1\nrectangle \"intermediate context\" as i2\nrectangle result\nthis --> i1: f1\ni1 --> i2: f2\ni2 --> result: f3\n@enduml\n```"
            },
            "examples": [
                {
                    "name": "AttrDynamicReferenceMultipleNames",
                    "doc": "Gets a list of values discovered in nested input structure of dicts with paths defined in input data.\nList of paths may include any number of paths of any depth.",
                    "template": {
                        "$": "chain",
                        "funcs": [
                            {
                                "$": "set",
                                "name": "root"
                            },
                            {
                                "$": "attr",
                                "name": "paths"
                            },
                            {
                                "$": "map",
                                "item": {
                                    "$": "chain",
                                    "funcs": [
                                        {
                                            "$": "get",
                                            "name": "root"
                                        },
                                        {
                                            "$": "attr",
                                            "names": {
                                                "$": "item"
                                            }
                                        }
                                    ]
                                }
                            }
                        ]
                    },
                    "data": {
                        "a": {
                            "b": {
                                "c": 1,
                                "d": 2
                            },
                            "e": {
                                "f": 3,
                                "g": 4
                            }
                        },
                        "paths": [
                            [
                                "a",
                                "b",
                                "d"
                            ],
                            [
                                "a",
                                "b",
                                "c"
                            ],
                            [
                                "a",
                                "e",
                                "g"
                            ],
                            [
                                "a",
                                "e",
                                "f"
                            ]
                        ]
                    },
                    "result": [
                        2,
                        1,
                        4,
                        3
                    ]
                },
                {
                    "name": "ChainWithAttr",
                    "doc": "Searching for values in nested structure with sequence of `attr` operations chained together.",
                    "template": {
                        "$": "map",
                        "item": {
                            "key": {
                                "$": "chain",
                                "funcs": [
                                    {
                                        "$": "item"
                                    },
                                    {
                                        "$": "attr",
                                        "name": "a"
                                    },
                                    {
                                        "$": "attr",
                                        "name": "b"
                                    },
                                    {
                                        "$": "attr",
                                        "name": "c"
                                    }
                                ]
                            },
                            "value": {
                                "$": "chain",
                                "funcs": [
                                    {
                                        "$": "item"
                                    },
                                    {
                                        "$": "attr",
                                        "name": "d"
                                    },
                                    {
                                        "$": "attr",
                                        "name": "e"
                                    },
                                    {
                                        "$": "attr",
                                        "name": "f"
                                    }
                                ]
                            }
                        }
                    },
                    "data": [
                        {
                            "a": {
                                "b": {
                                    "c": 1
                                }
                            },
                            "d": {
                                "e": {
                                    "f": 2
                                }
                            }
                        },
                        {
                            "a": {
                                "b": {
                                    "c": 3
                                }
                            },
                            "d": {
                                "e": {
                                    "f": 4
                                }
                            }
                        }
                    ],
                    "result": [
                        {
                            "key": 1,
                            "value": 2
                        },
                        {
                            "key": 3,
                            "value": 4
                        }
                    ]
                },
                {
                    "name": "ExprSimpleMonads2",
                    "doc": "Adds prefix to input string.\nIllustrates functionality of `expr` rule in form of monad and usage of `parent` rule.",
                    "template": {
                        "$": "chain",
                        "funcs": [
                            "prefix_",
                            {
                                "$": "expr",
                                "op": "+",
                                "value": {
                                    "$": "parent"
                                }
                            }
                        ]
                    },
                    "data": "value",
                    "result": "prefix_value"
                },
                {
                    "name": "ExprMonadsComplex",
                    "doc": "For input dictionary containing two integers returns sum of squares.\nIllustrates functionality of `expr` rule in form of monad.",
                    "template": {
                        "$": "chain",
                        "funcs": [
                            {
                                "$": "chain",
                                "funcs": [
                                    {
                                        "$": "attr",
                                        "name": "a"
                                    },
                                    {
                                        "$": "expr",
                                        "op": "*",
                                        "value": {
                                            "$": "this"
                                        }
                                    }
                                ]
                            },
                            {
                                "$": "expr",
                                "op": "+",
                                "value": {
                                    "$": "chain",
                                    "funcs": [
                                        {
                                            "$": "parent"
                                        },
                                        {
                                            "$": "attr",
                                            "name": "b"
                                        },
                                        {
                                            "$": "expr",
                                            "op": "*",
                                            "value": {
                                                "$": "this"
                                            }
                                        }
                                    ]
                                }
                            }
                        ]
                    },
                    "data": {
                        "a": 3,
                        "b": 4
                    },
                    "result": 25
                },
                {
                    "name": "MapListToList",
                    "doc": "Maps two lists obtained from different attributes of input.\nThen joins two obtained lists into single resulting list.",
                    "template": {
                        "$": "join",
                        "items": [
                            {
                                "$": "chain",
                                "funcs": [
                                    {
                                        "$": "attr",
                                        "name": "first"
                                    },
                                    {
                                        "$": "map",
                                        "item": {
                                            "first": {
                                                "$": "item"
                                            }
                                        }
                                    }
                                ]
                            },
                            {
                                "$": "chain",
                                "funcs": [
                                    {
                                        "$": "attr",
                                        "name": "second"
                                    },
                                    {
                                        "$": "map",
                                        "item": {
                                            "second": {
                                                "$": "item"
                                            }
                                        }
                                    }
                                ]
                            }
                        ]
                    },
                    "data": {
                        "first": [
                            1,
                            2,
                            3
                        ],
                        "second": [
                            4,
                            5,
                            6
                        ]
                    },
                    "result": [
                        {
                            "first": 1
                        },
                        {
                            "first": 2
                        },
                        {
                            "first": 3
                        },
                        {
                            "second": 4
                        },
                        {
                            "second": 5
                        },
                        {
                            "second": 6
                        }
                    ]
                },
                {
                    "name": "MapListsToDict",
                    "doc": "Zips two lists containing keys and values together into pairs.\nThen iterates over list of pairs and produces resulting dict.",
                    "template": {
                        "$": "chain",
                        "funcs": [
                            {
                                "$": "zip",
                                "items": [
                                    {
                                        "$": "attr",
                                        "name": "keys"
                                    },
                                    {
                                        "$": "attr",
                                        "name": "values"
                                    }
                                ]
                            },
                            {
                                "$": "map",
                                "key": {
                                    "$": "attr",
                                    "name": 0
                                },
                                "value": {
                                    "$": "attr",
                                    "name": 1
                                }
                            }
                        ]
                    },
                    "data": {
                        "keys": [
                            "a",
                            "b",
                            "c"
                        ],
                        "values": [
                            1,
                            2,
                            3
                        ]
                    },
                    "result": {
                        "a": 1,
                        "b": 2,
                        "c": 3
                    }
                },
                {
                    "name": "NoContentForAttr",
                    "doc": "Gets variable names `foo` that does not exist from context.\nThen tries to get attribute named `bar` of non-existing value.\nThis results into no value which translates into `None`.",
                    "template": {
                        "$": "chain",
                        "funcs": [
                            {
                                "$": "get",
                                "name": "foo"
                            },
                            {
                                "$": "attr",
                                "name": "bar"
                            }
                        ]
                    },
                    "data": "value",
                    "result": null
                }
            ],
            "params": [
                {
                    "param": {
                        "name": "funcs",
                        "doc": "Define list of templates (not just rules) for chaining"
                    },
                    "examples": []
                }
            ]
        },
        {
            "rule": {
                "name": "expr",
                "doc": "Executes unary or binary operation.\nThere are 3 modes of running this rule:\n\n1. **No attributes were specified:**\nResult is unary operation calculation against current context value.\n2. **Single `value` was specified:**\nResult is binary operation calculation where the\nfirst argument is current values of context and\nthe second is specified value.\n3. **Multiple `values` were specified:**\nResult is calculated by applying operation to all values in pairs (reduction).\nIn this case current context value is ignored.\n\nParameters are mutually exclusive."
            },
            "examples": [],
            "params": [
                {
                    "param": {
                        "name": "op",
                        "doc": "Defines name of operation. This is always constant.\n\n###### Possible values:\n\n| operator     | alternative | kind   | types          | result         |\n|--------------|-------------|--------|----------------|----------------|\n| <            | lt          | binary | any            | boolean        |\n| <=           | le          | binary | any            | boolean        |\n| ==           | eq          | binary | any            | boolean        |\n| !=           | ne          | binary | any            | boolean        |\n| >=           | ge          | binary | any            | boolean        |\n| &gt;         | gt          | binary | any            | boolean        |\n| +            | add         | binary | string, number | string, number |\n| -            | sub         | binary | number         | number         |\n| *            | mul         | binary | number         | number         |\n| /            | div         | binary | number         | number         |\n| %            | mod         | binary | number         | number         |\n| &&           | and         | binary | boolean        | boolean        |\n| &#124;&#124; | or          | binary | boolean        | boolean        |\n| !            | not         | unary  | boolean        | boolean        |\n\nYou can use code-style or mnemonic name (i.e. operator or alternative). "
                    },
                    "examples": [
                        {
                            "name": "ExprUnary1",
                            "doc": "Calculates negation of input using `expr` rule with unary operator as monad.",
                            "template": {
                                "$": "expr",
                                "op": "!"
                            },
                            "data": true,
                            "result": false
                        },
                        {
                            "name": "ExprUnary2",
                            "doc": "Calculates negation of input using `expr` rule with unary operator in alternative form.",
                            "template": {
                                "$": "expr",
                                "op": "not"
                            },
                            "data": false,
                            "result": true
                        }
                    ]
                },
                {
                    "param": {
                        "name": "value",
                        "doc": "Defines template for single parameter value"
                    },
                    "examples": [
                        {
                            "name": "ConvertValue",
                            "doc": "Adds 100 to input integer and converts result into string.\nIllustrates usage of `call` attribute `value`.",
                            "template": {
                                "$": "call",
                                "name": "str",
                                "value": {
                                    "$": "expr",
                                    "op": "add",
                                    "value": 100
                                }
                            },
                            "data": 123,
                            "result": "223"
                        },
                        {
                            "name": "ExprSimpleMonads1",
                            "doc": "Adds suffix to input string.\nIllustrates functionality of `expr` rule in form of monad.",
                            "template": {
                                "$": "expr",
                                "op": "+",
                                "value": "_suffix"
                            },
                            "data": "value",
                            "result": "value_suffix"
                        },
                        {
                            "name": "ExprSimpleMonads2",
                            "doc": "Adds prefix to input string.\nIllustrates functionality of `expr` rule in form of monad and usage of `parent` rule.",
                            "template": {
                                "$": "chain",
                                "funcs": [
                                    "prefix_",
                                    {
                                        "$": "expr",
                                        "op": "+",
                                        "value": {
                                            "$": "parent"
                                        }
                                    }
                                ]
                            },
                            "data": "value",
                            "result": "prefix_value"
                        },
                        {
                            "name": "ExprMonadsComplex",
                            "doc": "For input dictionary containing two integers returns sum of squares.\nIllustrates functionality of `expr` rule in form of monad.",
                            "template": {
                                "$": "chain",
                                "funcs": [
                                    {
                                        "$": "chain",
                                        "funcs": [
                                            {
                                                "$": "attr",
                                                "name": "a"
                                            },
                                            {
                                                "$": "expr",
                                                "op": "*",
                                                "value": {
                                                    "$": "this"
                                                }
                                            }
                                        ]
                                    },
                                    {
                                        "$": "expr",
                                        "op": "+",
                                        "value": {
                                            "$": "chain",
                                            "funcs": [
                                                {
                                                    "$": "parent"
                                                },
                                                {
                                                    "$": "attr",
                                                    "name": "b"
                                                },
                                                {
                                                    "$": "expr",
                                                    "op": "*",
                                                    "value": {
                                                        "$": "this"
                                                    }
                                                }
                                            ]
                                        }
                                    }
                                ]
                            },
                            "data": {
                                "a": 3,
                                "b": 4
                            },
                            "result": 25
                        }
                    ]
                },
                {
                    "param": {
                        "name": "values",
                        "doc": "Defines template for multiple parameters values"
                    },
                    "examples": [
                        {
                            "name": "ExprSimpleValues1",
                            "doc": "Adds suffix to input string.\nIllustrates functionality of `expr` rule with direct parameters.",
                            "template": {
                                "$": "expr",
                                "op": "+",
                                "values": [
                                    {
                                        "$": "this"
                                    },
                                    "_suffix"
                                ]
                            },
                            "data": "value",
                            "result": "value_suffix"
                        },
                        {
                            "name": "ExprSimpleValues2",
                            "doc": "Adds prefix to input string.\nIllustrates functionality of `expr` rule with direct parameters.",
                            "template": {
                                "$": "expr",
                                "op": "+",
                                "values": [
                                    "prefix_",
                                    {
                                        "$": "this"
                                    }
                                ]
                            },
                            "data": "value",
                            "result": "prefix_value"
                        },
                        {
                            "name": "ExprValuesComplex",
                            "doc": "For input dictionary containing two integers returns sum of squares.\nIllustrates functionality of `expr` rule with direct parameters.",
                            "template": {
                                "$": "expr",
                                "op": "+",
                                "values": [
                                    {
                                        "$": "expr",
                                        "op": "*",
                                        "values": [
                                            {
                                                "$": "attr",
                                                "name": "a"
                                            },
                                            {
                                                "$": "attr",
                                                "name": "a"
                                            }
                                        ]
                                    },
                                    {
                                        "$": "expr",
                                        "op": "*",
                                        "values": [
                                            {
                                                "$": "attr",
                                                "name": "b"
                                            },
                                            {
                                                "$": "attr",
                                                "name": "b"
                                            }
                                        ]
                                    }
                                ]
                            },
                            "data": {
                                "a": 3,
                                "b": 4
                            },
                            "result": 25
                        },
                        {
                            "name": "FormatWithValue",
                            "doc": "Iterates over list of values.\nFor formatting value creates dict with dynamically calculated values.\nProduces list of strings using formatting.",
                            "template": {
                                "$": "map",
                                "item": {
                                    "$": "format",
                                    "pattern": "{x}-{y}",
                                    "value": {
                                        "x": {
                                            "$": "this"
                                        },
                                        "y": {
                                            "$": "expr",
                                            "op": "+",
                                            "values": [
                                                {
                                                    "$": "index"
                                                },
                                                1
                                            ]
                                        }
                                    }
                                }
                            },
                            "data": [
                                "a",
                                "b",
                                "c"
                            ],
                            "result": [
                                "a-1",
                                "b-2",
                                "c-3"
                            ]
                        }
                    ]
                }
            ]
        },
        {
            "rule": {
                "name": "call",
                "doc": "Runs function registered in `Transformer`.\nUsually, that is used to convert values into different type, but you can also use it to call any function.\n\nThere are 3 modes of running this rule:\n\n1. **No attributes were specified:**\nRuns conversion function with single parameter - value of current context.\n2. **Single `value` was specified:**\nRuns conversion function with single parameter - provided value.\nCurrent context is ignored in this case.\n3. **Multiple `values` were specified:**\nRuns conversion function with multiple parameters.\nCurrent context is ignored in this case.\n\nParameters are mutually exclusive."
            },
            "examples": [
                {
                    "name": "ConvertNoParameters",
                    "doc": "Converts input integer into string.",
                    "template": {
                        "$": "call",
                        "name": "str"
                    },
                    "data": 123,
                    "result": "123"
                }
            ],
            "params": [
                {
                    "param": {
                        "name": "name",
                        "doc": "Defines the name of function. This is always constant.\n\n###### Possible values:\n\n| name  | input | output |\n|-------|:-----:|:------:|\n| str   |  any  |  str   | \n| int   |  str  |  int   | \n| float |  str  | float  | "
                    },
                    "examples": []
                },
                {
                    "param": {
                        "name": "value",
                        "doc": "Defines template for single parameter value"
                    },
                    "examples": [
                        {
                            "name": "ConvertValue",
                            "doc": "Adds 100 to input integer and converts result into string.\nIllustrates usage of `call` attribute `value`.",
                            "template": {
                                "$": "call",
                                "name": "str",
                                "value": {
                                    "$": "expr",
                                    "op": "add",
                                    "value": 100
                                }
                            },
                            "data": 123,
                            "result": "223"
                        }
                    ]
                },
                {
                    "param": {
                        "name": "values",
                        "doc": "Defines template for multiple parameters values"
                    },
                    "examples": [
                        {
                            "name": "ConvertValues",
                            "doc": "Converts input string into integer in base-16.",
                            "template": {
                                "$": "call",
                                "name": "int",
                                "values": [
                                    {
                                        "$": "this"
                                    },
                                    16
                                ]
                            },
                            "data": "FF",
                            "result": 255
                        }
                    ]
                }
            ]
        },
        {
            "rule": {
                "name": "format",
                "doc": "Execute string formatting using current value.\n\nIf `value` is specified it is used for formatting otherwise current context value is used.\n\nSee [this page](https://docs.python.org/3/tutorial/inputoutput.html#the-string-format-method)\nfor examples of how formatting in python works.\n\nIf value for formatting is `dict` it will be unpacked to separate names.\nIf value is list if will be unpacked to separate items.\nOtherwise while value will be passed to formatting."
            },
            "examples": [
                {
                    "name": "FormatFromSingleValue",
                    "doc": "Iterates list with floats and produces list of strings by formatting each item.",
                    "template": {
                        "$": "map",
                        "item": {
                            "$": "format",
                            "pattern": "{:.03f}"
                        }
                    },
                    "data": [
                        0.5,
                        0.3333333333333333,
                        0.25,
                        0.2,
                        0.16666666666666666,
                        0.14285714285714285,
                        0.125,
                        0.1111111111111111
                    ],
                    "result": [
                        "0.500",
                        "0.333",
                        "0.250",
                        "0.200",
                        "0.167",
                        "0.143",
                        "0.125",
                        "0.111"
                    ]
                },
                {
                    "name": "FormatFromDict",
                    "doc": "Iterates over list of dicts and produces list of string using items for filling pattern slots.",
                    "template": {
                        "$": "map",
                        "item": {
                            "$": "format",
                            "pattern": "{name}-{index}"
                        }
                    },
                    "data": [
                        {
                            "name": "a",
                            "index": 1
                        },
                        {
                            "name": "b",
                            "index": 2
                        },
                        {
                            "name": "c",
                            "index": 3
                        }
                    ],
                    "result": [
                        "a-1",
                        "b-2",
                        "c-3"
                    ]
                },
                {
                    "name": "FormatFromList",
                    "doc": "Iterates over list of lists and produces list of string using items for filling pattern slots.",
                    "template": {
                        "$": "map",
                        "item": {
                            "$": "format",
                            "pattern": "{0}-{1}"
                        }
                    },
                    "data": [
                        [
                            "a",
                            1
                        ],
                        [
                            "b",
                            2
                        ],
                        [
                            "c",
                            3
                        ]
                    ],
                    "result": [
                        "a-1",
                        "b-2",
                        "c-3"
                    ]
                }
            ],
            "params": [
                {
                    "param": {
                        "name": "pattern",
                        "doc": "Defines pattern for string formatting. This is always a constant."
                    },
                    "examples": []
                },
                {
                    "param": {
                        "name": "value",
                        "doc": "Defines template for input data. Optional."
                    },
                    "examples": [
                        {
                            "name": "FormatWithValue",
                            "doc": "Iterates over list of values.\nFor formatting value creates dict with dynamically calculated values.\nProduces list of strings using formatting.",
                            "template": {
                                "$": "map",
                                "item": {
                                    "$": "format",
                                    "pattern": "{x}-{y}",
                                    "value": {
                                        "x": {
                                            "$": "this"
                                        },
                                        "y": {
                                            "$": "expr",
                                            "op": "+",
                                            "values": [
                                                {
                                                    "$": "index"
                                                },
                                                1
                                            ]
                                        }
                                    }
                                }
                            },
                            "data": [
                                "a",
                                "b",
                                "c"
                            ],
                            "result": [
                                "a-1",
                                "b-2",
                                "c-3"
                            ]
                        }
                    ]
                }
            ]
        }
    ]
}